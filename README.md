# wheel-of-fortune-for-tilda

### Инструкция по интеграции кода на сайт Tilda

Ниже приведена пошаговая инструкция по интеграции предоставленного кода на сайт, созданный на платформе Tilda. Этот код реализует функционал "колеса фортуны" с возможностью выбора приза и генерации промокода.

---

### 1. **Подготовка к интеграции**
Перед началом интеграции убедитесь, что у вас есть доступ к редактированию сайта на Tilda и вы знакомы с базовыми принципами работы с блоками и кодом.

---

### 2. **Добавление HTML и CSS**
1. **Создайте новый блок**:
   - Перейдите в редактор страницы на Tilda.
   - Добавьте блок "HTML" (находится в разделе "Дополнительные блоки").
   - Вставьте предоставленный HTML-код в поле для HTML.

2. **Добавьте CSS**:
   - В том же блоке "HTML" вставьте CSS-код в тег `<style>`, если он еще не добавлен.
   - Убедитесь, что стили корректно отображаются на странице.

---

### 3. **Настройка JavaScript**
1. **Добавьте JavaScript**:
   - Вставьте предоставленный JavaScript-код в блок "HTML" внутри тега `<script>`.
   - Убедитесь, что код находится в конце HTML-кода, перед закрывающим тегом `</body>`.

2. **Проверка зависимостей**:
   - Убедитесь, что на странице подключена библиотека jQuery.

---

### 4. **Настройка формы Tilda**
1. **Создайте форму**:
   - Добавьте блок "Форма" на страницу.
   - Настройте форму, добавив необходимые поля (например, имя, email и т.д.).
   - Добавьте два скрытых поля:
     - `prize_name` (для хранения названия приза).
     - `prize_promo` (для хранения промокода).

2. **Свяжите форму с JavaScript**:
   - Убедитесь, что ID формы совпадает с тем, который указан в JavaScript-коде (в примере это `#form861389793`). Если ID другой, измените его в коде:
     ```javascript
     const tildaForm = document.querySelector('.wheel_form #form861389793');
     ```

3. **Настройка успешного сообщения**:
   - В настройках формы включите отображение успешного сообщения (поп-ап) после отправки формы.
   - Убедитесь, что класс успешного поп-апа совпадает с тем, который указан в JavaScript-коде (в примере это `.t-form-success-popup`).

---

### 5. **Настройка призов**
1. **Измените список призов**:
   - В JavaScript-коде найдите массив `prizes`:
     ```javascript
     const prizes = [
         { text: "Скидка 5%", weight: 100 },
         { text: "Паровая швабра", weight: 2, displayText: "Подарок" },
         { text: "Скидка 10%", weight: 40 },
         { text: "Отпариватель", weight: 2, displayText: "Подарок" },
         { text: "Скидка 30%", weight: 20 },
         { text: "Электрический чайник", weight: 2, displayText: "Подарок" },
     ];
     ```
   - Измените текст и вес призов в соответствии с вашими требованиями. Вес определяет вероятность выпадения приза.

2. **Настройка промокодов**:
   - Промокоды генерируются автоматически. Если нужно изменить формат промокода, найдите строку:
     ```javascript
     promoCode = `PROMO-${Math.random().toString(36).substring(2, 8).toUpperCase()}`;
     ```
   - Измените префикс `PROMO-` или длину промокода по своему усмотрению.

---

### 6. **Настройка отображения результата**
1. **Проверка блоков текста**:
   - В коде используются блоки с определенными атрибутами `field`, например:
     ```javascript
     const emailTextBlock = document.querySelector('.tn-atom[field="tn_text_1739881336288"]');
     ```
   - Убедитесь, что на вашей странице есть блоки с такими атрибутами. Если нет, измените селекторы в коде на соответствующие вашим блокам.

2. **Адаптация стилей**:
   - Если стили результата (например, размер шрифта, цвет) не подходят для вашего сайта, измените их в CSS-коде.

---

### 7. **Тестирование**
1. **Проверка функционала**:
   - Откройте страницу в браузере и проверьте, как работает колесо фортуны.
   - Убедитесь, что при вращении колеса выбирается приз, отображается результат и промокод копируется в буфер обмена.

2. **Проверка формы**:
   - Заполните форму и отправьте её. Убедитесь, что данные о призе и промокоде корректно передаются в скрытые поля формы.

3. **Проверка уведомлений**:
   - Убедитесь, что уведомление о копировании промокода появляется и исчезает корректно.
